{"ast":null,"code":"var _jsxFileName = \"/Users/zy/workspace-for-front-end/train-tickets-front-end/src/pages/train-page/train-select/TrainSelect.js\";\nimport React from 'react';\nimport './TrainSelect.css';\nimport Button from '../../../components/button/Button';\nimport Tools from \"../../../tools/Tools\";\n\nconst TrainSelectTitle = () => {\n  return React.createElement(\"div\", {\n    className: \"train-select-detail\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 8\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"train-select-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 9\n    },\n    __self: this\n  }, \" \\u706B\\u8F66\\u53F7\"), React.createElement(\"div\", {\n    className: \"train-select-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 10\n    },\n    __self: this\n  }, \" \\u53D1\\u8F66\\u65F6\\u95F4 \"), React.createElement(\"div\", {\n    className: \"train-select-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 11\n    },\n    __self: this\n  }, \" \\u7968\\u4EF7 \"), React.createElement(\"div\", {\n    className: \"train-select-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12\n    },\n    __self: this\n  }, \" \\u4E00\\u7B49\\u5EA7 \"), React.createElement(\"div\", {\n    className: \"train-select-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 13\n    },\n    __self: this\n  }, \" \\u4E8C\\u7B49\\u5EA7 \"), React.createElement(\"div\", {\n    className: \"train-select-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14\n    },\n    __self: this\n  }, \"  \"), React.createElement(\"div\", {\n    className: \"train-select-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 15\n    },\n    __self: this\n  }, \"  \"));\n};\n\nclass TrainSelectDetail extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.queryRemainSeats = () => {\n      const para = {\n        trainId: this.props.train.trainId,\n        date: this.props.date,\n        fromStopId: this.props.train.startIndex,\n        toStopId: this.props.train.endIndex\n      };\n      console.log(para);\n      fetch('http://localhost:8080/TrainTickets/getRemainSeats', {\n        method: 'post',\n        mode: 'cors',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body: Tools.toPostPara(para)\n      }).then(res => res.json()).then(json => {\n        if (json.statusCode === '1000') {\n          const seats = JSON.parse(json.content);\n          let firstClassSeatNum = 0;\n          let secondClassSeatNum = 0;\n\n          for (const item of seats) {\n            if (item.seatType === '一等座') {\n              firstClassSeatNum++;\n            } else if (item.seatType === '二等座') {\n              secondClassSeatNum++;\n            }\n          }\n\n          this.setState({\n            first: firstClassSeatNum,\n            second: secondClassSeatNum\n          });\n          console.log(firstClassSeatNum, secondClassSeatNum);\n          console.log(JSON.parse(json.content));\n        } else {\n          alert('出错啦');\n        }\n      });\n    };\n\n    this.queryRemainSeats = this.queryRemainSeats.bind(this);\n    this.state = {\n      first: '点此查询余座',\n      second: '点此查询余座'\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"train-select-detail\",\n      onClick: this.queryRemainSeats,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"train-select-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, \" \", this.props.train.trainName, \" \"), React.createElement(\"div\", {\n      className: \"train-select-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \" \", this.props.train.startTime, \" \"), React.createElement(\"div\", {\n      className: \"train-select-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, \" \", this.props.date, \" \"), React.createElement(\"div\", {\n      className: \"train-select-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, \" \", this.state.first, \" \"), React.createElement(\"div\", {\n      className: \"train-select-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, \" \", this.state.second, \" \"), React.createElement(Button, {\n      class: 'train-tickets-button-default',\n      text: '一等座购票',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }), React.createElement(Button, {\n      class: 'train-tickets-button-default',\n      text: '二等座购票',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }));\n  }\n\n}\n\nconst TrainSelect = props => {\n  // 遍历数组添加组件\n  const listItems = props.trainList.map((item, index) => React.createElement(TrainSelectDetail, {\n    key: index,\n    train: item,\n    date: props.date,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }));\n  console.log('test', props.date);\n  return React.createElement(\"div\", {\n    className: \"train-select\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"train-select-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, \" \\u67E5\\u8BE2\\u7ED3\\u679C\\uFF1A \"), React.createElement(TrainSelectTitle, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, \" \", listItems, \" \"));\n};\n\nexport default TrainSelect;","map":{"version":3,"sources":["/Users/zy/workspace-for-front-end/train-tickets-front-end/src/pages/train-page/train-select/TrainSelect.js"],"names":["React","Button","Tools","TrainSelectTitle","TrainSelectDetail","Component","constructor","props","queryRemainSeats","para","trainId","train","date","fromStopId","startIndex","toStopId","endIndex","console","log","fetch","method","mode","headers","body","toPostPara","then","res","json","statusCode","seats","JSON","parse","content","firstClassSeatNum","secondClassSeatNum","item","seatType","setState","first","second","alert","bind","state","render","trainName","startTime","TrainSelect","listItems","trainList","map","index"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './TrainSelect.css'\nimport Button from '../../../components/button/Button';\nimport Tools from \"../../../tools/Tools\";\n\nconst TrainSelectTitle = () => {\n  return (\n    <div className='train-select-detail'>\n      <div className='train-select-item'> 火车号</div>\n      <div className='train-select-item'> 发车时间 </div>\n      <div className='train-select-item'> 票价 </div>\n      <div className='train-select-item'> 一等座 </div>\n      <div className='train-select-item'> 二等座 </div>\n      <div className='train-select-item'>  </div>\n      <div className='train-select-item'>  </div>\n    </div>\n  );\n};\n\nclass TrainSelectDetail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.queryRemainSeats = this.queryRemainSeats.bind(this);\n    this.state = {\n      first: '点此查询余座',\n      second: '点此查询余座'\n    };\n  }\n  \n  queryRemainSeats = () => {\n    const para = {\n      trainId: this.props.train.trainId,\n      date: this.props.date,\n      fromStopId: this.props.train.startIndex,\n      toStopId: this.props.train.endIndex\n    };\n    \n    console.log(para);\n    \n    fetch('http://localhost:8080/TrainTickets/getRemainSeats', {\n      method: 'post',\n      mode: 'cors',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: Tools.toPostPara(para)\n    })\n      .then(res => res.json())\n      .then(json => {\n        if (json.statusCode === '1000') {\n          const seats = JSON.parse(json.content);\n          let firstClassSeatNum = 0;\n          let secondClassSeatNum = 0;\n          \n          for (const item of seats) {\n            if (item.seatType === '一等座') {\n              firstClassSeatNum++;\n            } else if (item.seatType === '二等座') {\n              secondClassSeatNum++;\n            }\n          }\n          \n          this.setState({\n            first: firstClassSeatNum,\n            second: secondClassSeatNum\n          });\n          console.log(firstClassSeatNum, secondClassSeatNum);\n          console.log(JSON.parse(json.content));\n        } else {\n          alert('出错啦');\n        }\n      });\n  };\n  \n  render() {\n    return (\n      <div className='train-select-detail' onClick={this.queryRemainSeats}>\n        <div className='train-select-item'> {this.props.train.trainName} </div>\n        <div className='train-select-item'> {this.props.train.startTime} </div>\n        <div className='train-select-item'> {this.props.date} </div>\n        <div className='train-select-item'> {this.state.first} </div>\n        <div className='train-select-item'> {this.state.second} </div>\n        <Button class={'train-tickets-button-default'} text={'一等座购票'}/>\n        <Button class={'train-tickets-button-default'} text={'二等座购票'}/>\n      </div>\n    );\n  }\n}\n\nconst TrainSelect = (props) => {\n  // 遍历数组添加组件\n  const listItems = props.trainList.map((item, index) =>\n    <TrainSelectDetail key={index} train={item} date={props.date}/>\n  );\n  console.log('test', props.date);\n  return (\n    <div className='train-select'>\n      <div className='train-select-title'> 查询结果： </div>\n      <TrainSelectTitle/>\n      <div> {listItems} </div>\n    </div>\n  );\n};\n\nexport default TrainSelect;\n"]},"metadata":{},"sourceType":"module"}