{"ast":null,"code":"var _jsxFileName = \"/Users/zy/workspace-for-front-end/train-tickets-front-end/src/pages/train-page/train-select/TrainSelect.js\";\nimport React from 'react';\nimport './TrainSelect.css';\nimport Button from '../../../components/button/Button';\nimport Tools from '../../../tools/Tools';\n\nconst TrainSelectTitle = () => {\n  return React.createElement(\"div\", {\n    className: \"train-select-detail\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 8\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"train-select-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 9\n    },\n    __self: this\n  }, \" \\u706B\\u8F66\\u53F7\"), React.createElement(\"div\", {\n    className: \"train-select-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 10\n    },\n    __self: this\n  }, \" \\u53D1\\u8F66\\u65F6\\u95F4 \"), React.createElement(\"div\", {\n    className: \"train-select-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 11\n    },\n    __self: this\n  }, \" \\u7968\\u4EF7 \"), React.createElement(\"div\", {\n    className: \"train-select-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12\n    },\n    __self: this\n  }, \" \\u4E00\\u7B49\\u5EA7 \"), React.createElement(\"div\", {\n    className: \"train-select-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 13\n    },\n    __self: this\n  }, \" \\u4E8C\\u7B49\\u5EA7 \"), React.createElement(\"div\", {\n    className: \"train-select-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14\n    },\n    __self: this\n  }, \"  \"), React.createElement(\"div\", {\n    className: \"train-select-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 15\n    },\n    __self: this\n  }, \"  \"));\n};\n\nclass TrainSelectDetail extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.buyFirstClassTickets = () => {\n      this.buyTickets(this.firstClassSeat[0]);\n    };\n\n    this.buySecondClassTickets = () => {\n      this.buyTickets(this.secondClassSeat[0]);\n    };\n\n    this.buyTickets = seat => {\n      const user = JSON.parse(localStorage.getItem('user'));\n      const train = this.props.train;\n      const date = this.props.date; // const para = {\n      //   userId: user.userId,\n      //   passwordId: user.password,\n      //   userName: user.userName,\n      //   trainId: train.trainId,\n      //   trainName: train.trainName,\n      //   carriage: seat.carriage,\n      //   seatType: seat.seatType,\n      //   seatId: seat.seatId,\n      //   seatLocation: seat.seatLocation,\n      //   startTime: train.startTime,\n      //   startStopId: train.startIndex,\n      //   startStationName: train.start,\n      //   endStopId: train.endIndex,\n      //   endStationName: train.end,\n      //   date: date,\n      //   createAt: '2018-12-31',\n      //   status: '已付款'\n      // };\n\n      const para = {\n        userId: '1',\n        passwordId: '123',\n        userName: 'user1',\n        trainId: train.trainId,\n        trainName: train.trainName,\n        carriage: seat.carriage,\n        seatType: seat.seatType,\n        seatId: seat.seatId,\n        seatLocation: seat.seatLocation,\n        startTime: train.startTime,\n        startStopId: train.startIndex,\n        startStationName: train.start,\n        endStopId: train.endIndex,\n        endStationName: train.end,\n        date: date,\n        createAt: '2018-12-31',\n        status: '已付款'\n      };\n      console.log(user);\n      console.log(train);\n      console.log(seat);\n      console.log(date);\n      console.log(para);\n      fetch('http://localhost:8080/TrainTickets/lockSeat', {\n        method: 'post',\n        mode: 'cors',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body: Tools.toPostPara(para)\n      }).then(res => res.json()).then(json => {\n        console.log(json);\n\n        if (json.statusCode === '1000') {\n          console.log(JSON.parse(json.content));\n        } else {\n          alert('出错啦');\n        }\n      });\n    };\n\n    this.firstClassSeat = [];\n    this.secondClassSeat = [];\n    this.buyTickets = this.buyTickets.bind(this);\n    this.state = {\n      first: '',\n      second: ''\n    };\n  } // 组件刚挂载时需要先获取到余票情况\n\n\n  componentDidMount() {\n    const para = {\n      trainId: this.props.train.trainId,\n      date: this.props.date,\n      fromStopId: this.props.train.startIndex,\n      toStopId: this.props.train.endIndex\n    };\n    fetch('http://localhost:8080/TrainTickets/getRemainSeats', {\n      method: 'post',\n      mode: 'cors',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: Tools.toPostPara(para)\n    }).then(res => res.json()).then(json => {\n      if (json.statusCode === '1000') {\n        this.firstClassSeat = [];\n        this.secondClassSeat = [];\n        const seats = JSON.parse(json.content);\n\n        for (const item of seats) {\n          if (item.seatType === '一等座') {\n            this.firstClassSeat.push(item);\n          } else if (item.seatType === '二等座') {\n            this.secondClassSeat.push(item);\n          }\n        }\n\n        this.setState({\n          first: this.firstClassSeat.length,\n          second: this.secondClassSeat.length\n        });\n        console.log(JSON.parse(json.content));\n      } else {\n        alert('出错啦');\n      }\n    });\n  } // 点击购买一等票\n\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"train-select-detail\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"train-select-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, \" \", this.props.train.trainName, \" \"), React.createElement(\"div\", {\n      className: \"train-select-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, \" \", this.props.train.startTime, \" \"), React.createElement(\"div\", {\n      className: \"train-select-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, \" \", this.props.date, \" \"), React.createElement(\"div\", {\n      className: \"train-select-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, \" \", this.state.first, \" \"), React.createElement(\"div\", {\n      className: \"train-select-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, \" \", this.state.second, \" \"), React.createElement(Button, {\n      class: 'train-tickets-button-default',\n      text: '一等座购票',\n      onClick: this.buyFirstClassTickets,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }), React.createElement(Button, {\n      class: 'train-tickets-button-default',\n      text: '二等座购票',\n      onClick: this.buySecondClassTickets,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }));\n  }\n\n}\n\nconst TrainSelect = props => {\n  // 遍历数组添加组件\n  const listItems = props.trainList.map((item, index) => React.createElement(TrainSelectDetail, {\n    key: index,\n    train: item,\n    date: props.date,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  }));\n  return React.createElement(\"div\", {\n    className: \"train-select\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"train-select-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }, \" \\u67E5\\u8BE2\\u7ED3\\u679C\\uFF1A \"), React.createElement(TrainSelectTitle, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183\n    },\n    __self: this\n  }, \" \", listItems, \" \"));\n};\n\nexport default TrainSelect;","map":{"version":3,"sources":["/Users/zy/workspace-for-front-end/train-tickets-front-end/src/pages/train-page/train-select/TrainSelect.js"],"names":["React","Button","Tools","TrainSelectTitle","TrainSelectDetail","Component","constructor","props","buyFirstClassTickets","buyTickets","firstClassSeat","buySecondClassTickets","secondClassSeat","seat","user","JSON","parse","localStorage","getItem","train","date","para","userId","passwordId","userName","trainId","trainName","carriage","seatType","seatId","seatLocation","startTime","startStopId","startIndex","startStationName","start","endStopId","endIndex","endStationName","end","createAt","status","console","log","fetch","method","mode","headers","body","toPostPara","then","res","json","statusCode","content","alert","bind","state","first","second","componentDidMount","fromStopId","toStopId","seats","item","push","setState","length","render","TrainSelect","listItems","trainList","map","index"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './TrainSelect.css'\nimport Button from '../../../components/button/Button';\nimport Tools from '../../../tools/Tools';\n\nconst TrainSelectTitle = () => {\n  return (\n    <div className='train-select-detail'>\n      <div className='train-select-item'> 火车号</div>\n      <div className='train-select-item'> 发车时间 </div>\n      <div className='train-select-item'> 票价 </div>\n      <div className='train-select-item'> 一等座 </div>\n      <div className='train-select-item'> 二等座 </div>\n      <div className='train-select-item'>  </div>\n      <div className='train-select-item'>  </div>\n    </div>\n  );\n};\n\nclass TrainSelectDetail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.firstClassSeat = [];\n    this.secondClassSeat = [];\n    this.buyTickets = this.buyTickets.bind(this);\n    this.state = {\n      first: '',\n      second: ''\n    };\n  }\n  \n  // 组件刚挂载时需要先获取到余票情况\n  componentDidMount() {\n    const para = {\n      trainId: this.props.train.trainId,\n      date: this.props.date,\n      fromStopId: this.props.train.startIndex,\n      toStopId: this.props.train.endIndex\n    };\n  \n    fetch('http://localhost:8080/TrainTickets/getRemainSeats', {\n      method: 'post',\n      mode: 'cors',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: Tools.toPostPara(para)\n    })\n      .then(res => res.json())\n      .then(json => {\n        if (json.statusCode === '1000') {\n          this.firstClassSeat = [];\n          this.secondClassSeat = [];\n        \n          const seats = JSON.parse(json.content);\n        \n          for (const item of seats) {\n            if (item.seatType === '一等座') {\n              this.firstClassSeat.push(item);\n            } else if (item.seatType === '二等座') {\n              this.secondClassSeat.push(item);\n            }\n          }\n        \n          this.setState({\n            first: this.firstClassSeat.length,\n            second: this.secondClassSeat.length\n          });\n        \n          console.log(JSON.parse(json.content));\n        } else {\n          alert('出错啦');\n        }\n      });\n  }\n  \n  // 点击购买一等票\n  buyFirstClassTickets = () => {\n    this.buyTickets(this.firstClassSeat[0]);\n  };\n  \n  // 点击购买二等票\n  buySecondClassTickets = () => {\n    this.buyTickets(this.secondClassSeat[0])\n  };\n  \n  // 点击购票\n  buyTickets = (seat) => {\n    const user = JSON.parse(localStorage.getItem('user'));\n    const train = this.props.train;\n    const date = this.props.date;\n    \n    // const para = {\n    //   userId: user.userId,\n    //   passwordId: user.password,\n    //   userName: user.userName,\n    //   trainId: train.trainId,\n    //   trainName: train.trainName,\n    //   carriage: seat.carriage,\n    //   seatType: seat.seatType,\n    //   seatId: seat.seatId,\n    //   seatLocation: seat.seatLocation,\n    //   startTime: train.startTime,\n    //   startStopId: train.startIndex,\n    //   startStationName: train.start,\n    //   endStopId: train.endIndex,\n    //   endStationName: train.end,\n    //   date: date,\n    //   createAt: '2018-12-31',\n    //   status: '已付款'\n    // };\n  \n    const para = {\n      userId: '1',\n      passwordId: '123',\n      userName: 'user1',\n      trainId: train.trainId,\n      trainName: train.trainName,\n      carriage: seat.carriage,\n      seatType: seat.seatType,\n      seatId: seat.seatId,\n      seatLocation: seat.seatLocation,\n      startTime: train.startTime,\n      startStopId: train.startIndex,\n      startStationName: train.start,\n      endStopId: train.endIndex,\n      endStationName: train.end,\n      date: date,\n      createAt: '2018-12-31',\n      status: '已付款'\n    };\n  \n    console.log(user);\n    console.log(train);\n    console.log(seat);\n    console.log(date);\n    console.log(para);\n    \n    fetch('http://localhost:8080/TrainTickets/lockSeat', {\n      method: 'post',\n      mode: 'cors',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: Tools.toPostPara(para)\n    })\n      .then(res => res.json())\n      .then(json => {\n        console.log(json);\n        if (json.statusCode === '1000') {\n          console.log(JSON.parse(json.content));\n        } else {\n          alert('出错啦');\n        }\n      });\n  };\n  \n  render() {\n    return (\n      <div className='train-select-detail'>\n        <div className='train-select-item'> {this.props.train.trainName} </div>\n        <div className='train-select-item'> {this.props.train.startTime} </div>\n        <div className='train-select-item'> {this.props.date} </div>\n        <div className='train-select-item'> {this.state.first} </div>\n        <div className='train-select-item'> {this.state.second} </div>\n        <Button class={'train-tickets-button-default'} text={'一等座购票'} onClick={this.buyFirstClassTickets}/>\n        <Button class={'train-tickets-button-default'} text={'二等座购票'} onClick={this.buySecondClassTickets}/>\n      </div>\n    );\n  }\n}\n\nconst TrainSelect = (props) => {\n  // 遍历数组添加组件\n  const listItems = props.trainList.map((item, index) =>\n    <TrainSelectDetail key={index} train={item} date={props.date}/>\n  );\n\n  return (\n    <div className='train-select'>\n      <div className='train-select-title'> 查询结果： </div>\n      <TrainSelectTitle/>\n      <div> {listItems} </div>\n    </div>\n  );\n};\n\nexport default TrainSelect;\n"]},"metadata":{},"sourceType":"module"}