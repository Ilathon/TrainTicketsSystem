{"ast":null,"code":"var _jsxFileName = \"/Users/zy/workspace-for-front-end/train-tickets-front-end/src/pages/login/Login.js\";\nimport React from 'react';\nimport \"./Login.css\";\n\nconst Login = () => {\n  let user = {\n    idcard: \"\",\n    password: \"\"\n  };\n\n  const toPostPara = obj => {\n    let output = \"\";\n\n    for (const item in obj) {\n      output = output + item + \"=\" + obj[item] + \"&\";\n    }\n\n    return output.substring(0, output.length - 1);\n  };\n\n  const loginInformationChange = e => {\n    const type = e.target.getAttribute(\"data-id\");\n    user[type] = e.target.value;\n  };\n\n  const login = () => {\n    console.log(\"user login\");\n    fetch('http://localhost:8080/TrainTickets/login', {\n      method: 'post',\n      mode: 'cors',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: toPostPara(user)\n    }).then(res => {\n      const json = res.json();\n      console.log(json.value);\n\n      if (json.statusCode === \"1000\") {\n        window.location.href = \"#/train\";\n      } else if (json.statusCode === \"1001\") {\n        alert(\"您被限制购票\");\n      } else {\n        alert(\"您输入的账号密码不正确\");\n      }\n    });\n  };\n\n  const goRegister = () => {\n    window.location.href = \"#/register\";\n  };\n\n  return React.createElement(\"div\", {\n    className: \"login\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"login-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, \" \\u6570\\u636E\\u5E93\\u8BFE\\u8BBE-12307\\u706B\\u8F66\\u552E\\u7968-\\u767B\\u5F55 \"), React.createElement(\"input\", {\n    className: \"login-input\",\n    placeholder: \"\\u7528\\u6237\\u540D\",\n    \"data-id\": \"idcard\",\n    onChange: loginInformationChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    className: \"login-input\",\n    placeholder: \"\\u5BC6\\u7801\",\n    \"data-id\": \"password\",\n    onChange: loginInformationChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"login-button\",\n    onClick: login,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, \" \\u767B\\u5F55 \"), React.createElement(\"div\", {\n    className: \"go-register\",\n    onClick: goRegister,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, \" \\u70B9\\u51FB\\u6B64\\u5904\\u6CE8\\u518C\\u65B0\\u7528\\u6237 \"));\n};\n\nexport default Login;","map":{"version":3,"sources":["/Users/zy/workspace-for-front-end/train-tickets-front-end/src/pages/login/Login.js"],"names":["React","Login","user","idcard","password","toPostPara","obj","output","item","substring","length","loginInformationChange","e","type","target","getAttribute","value","login","console","log","fetch","method","mode","headers","body","then","res","json","statusCode","window","location","href","alert","goRegister"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,aAAP;;AAEA,MAAMC,KAAK,GAAG,MAAM;AAClB,MAAIC,IAAI,GAAG;AACTC,IAAAA,MAAM,EAAE,EADC;AAETC,IAAAA,QAAQ,EAAE;AAFD,GAAX;;AAKA,QAAMC,UAAU,GAAIC,GAAD,IAAS;AAC1B,QAAIC,MAAM,GAAG,EAAb;;AACA,SAAK,MAAMC,IAAX,IAAmBF,GAAnB,EAAwB;AACtBC,MAAAA,MAAM,GAAGA,MAAM,GAAGC,IAAT,GAAgB,GAAhB,GAAsBF,GAAG,CAACE,IAAD,CAAzB,GAAkC,GAA3C;AACD;;AACD,WAAOD,MAAM,CAACE,SAAP,CAAiB,CAAjB,EAAoBF,MAAM,CAACG,MAAP,GAAgB,CAApC,CAAP;AACD,GAND;;AAQA,QAAMC,sBAAsB,GAAIC,CAAD,IAAO;AACpC,UAAMC,IAAI,GAAGD,CAAC,CAACE,MAAF,CAASC,YAAT,CAAsB,SAAtB,CAAb;AACAb,IAAAA,IAAI,CAACW,IAAD,CAAJ,GAAaD,CAAC,CAACE,MAAF,CAASE,KAAtB;AACD,GAHD;;AAKA,QAAMC,KAAK,GAAG,MAAM;AAClBC,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACAC,IAAAA,KAAK,CAAC,0CAAD,EAA4C;AAC/CC,MAAAA,MAAM,EAAC,MADwC;AAE/CC,MAAAA,IAAI,EAAE,MAFyC;AAG/CC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT,OAHsC;AAM/CC,MAAAA,IAAI,EAAEnB,UAAU,CAACH,IAAD;AAN+B,KAA5C,CAAL,CAQGuB,IARH,CAQQC,GAAG,IAAI;AACX,YAAMC,IAAI,GAAGD,GAAG,CAACC,IAAJ,EAAb;AACAT,MAAAA,OAAO,CAACC,GAAR,CAAYQ,IAAI,CAACX,KAAjB;;AACA,UAAIW,IAAI,CAACC,UAAL,KAAoB,MAAxB,EAAgC;AAC9BC,QAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,SAAvB;AACD,OAFD,MAEO,IAAIJ,IAAI,CAACC,UAAL,KAAoB,MAAxB,EAAgC;AACrCI,QAAAA,KAAK,CAAC,QAAD,CAAL;AACD,OAFM,MAEA;AACLA,QAAAA,KAAK,CAAC,aAAD,CAAL;AACD;AACF,KAlBH;AAmBD,GArBD;;AAuBA,QAAMC,UAAU,GAAG,MAAM;AACvBJ,IAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,YAAvB;AACD,GAFD;;AAIA,SACE;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mFADF,EAEE;AAAO,IAAA,SAAS,EAAC,aAAjB;AAA+B,IAAA,WAAW,EAAC,oBAA3C;AAAiD,eAAQ,QAAzD;AAAkE,IAAA,QAAQ,EAAEpB,sBAA5E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,EAGE;AAAO,IAAA,SAAS,EAAC,aAAjB;AAA+B,IAAA,WAAW,EAAC,cAA3C;AAAgD,eAAQ,UAAxD;AAAmE,IAAA,QAAQ,EAAEA,sBAA7E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,EAIE;AAAK,IAAA,SAAS,EAAC,cAAf;AAA8B,IAAA,OAAO,EAAEM,KAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAJF,EAKE;AAAK,IAAA,SAAS,EAAC,aAAf;AAA6B,IAAA,OAAO,EAAEgB,UAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gEALF,CADF;AASD,CAvDD;;AAyDA,eAAehC,KAAf","sourcesContent":["import React from 'react';\nimport \"./Login.css\"\n\nconst Login = () => {\n  let user = {\n    idcard: \"\",\n    password: \"\"\n  };\n  \n  const toPostPara = (obj) => {\n    let output = \"\";\n    for (const item in obj) {\n      output = output + item + \"=\" + obj[item] + \"&\"\n    }\n    return output.substring(0, output.length - 1);\n  };\n  \n  const loginInformationChange = (e) => {\n    const type = e.target.getAttribute(\"data-id\");\n    user[type] = e.target.value;\n  };\n  \n  const login = () => {\n    console.log(\"user login\");\n    fetch('http://localhost:8080/TrainTickets/login',{\n      method:'post',\n      mode: 'cors',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: toPostPara(user)\n    })\n      .then(res => {\n        const json = res.json();\n        console.log(json.value);\n        if (json.statusCode === \"1000\") {\n          window.location.href = \"#/train\";\n        } else if (json.statusCode === \"1001\") {\n          alert(\"您被限制购票\");\n        } else {\n          alert(\"您输入的账号密码不正确\")\n        }\n      })\n  };\n  \n  const goRegister = () => {\n    window.location.href = \"#/register\"\n  };\n  \n  return (\n    <div className=\"login\">\n      <div className=\"login-title\"> 数据库课设-12307火车售票-登录 </div>\n      <input className=\"login-input\" placeholder=\"用户名\" data-id=\"idcard\" onChange={loginInformationChange}/>\n      <input className=\"login-input\" placeholder=\"密码\" data-id=\"password\" onChange={loginInformationChange}/>\n      <div className=\"login-button\" onClick={login}> 登录 </div>\n      <div className=\"go-register\" onClick={goRegister}> 点击此处注册新用户 </div>\n    </div>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}